<html>
<script>

function HandleRegistrationResponse(response)
{
	var text = JSON.parse(response);
//	document.getElementById("textResponse").innerHTML = response+"<p>";	
	document.getElementById("textResponse").innerHTML = "response: "+text+"<p>";
}

function SendRegistrationRequest(username,password)
{
	var request = new XMLHttpRequest();
	request.open("POST","communication.php",true);
	request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
	request.onreadystatechange= function ()
	{
		
		if ((this.readyState == 4)&&(this.status == 200))
		{
			HandleRegistrationResponse(this.responseText);
			console.log("Sendregistrationrequest function ready state done.");
		}		
	}
	request.send("type=registration&uname="+username+"&pword="+password);
	console.log("type registration sent");
}


function getRegInfo()
{
	
	const username_text_input = document.getElementById("username");
	const username_input_value = username_text_input.value;
	
	const password_text_input = document.getElementById("password");
	const password_input_value = password_text_input.value;

	//keep track, just in case	NTS: when in doubt, console.log
	console.log("Username: ", username_input_value);
	console.log("Password: ", password_input_value);

	SendRegistrationRequest(username_input_value, password_input_value);
}

</script>

<head>
	<link rel="stylesheet" href="./style.css">
</head>
<body>
<div class="container">
	<div class="glass-card">
	<h1>Registration</h1>
	<p>Kindly fill in this form to register.</p>
		<form id="register-form">
			<div class="input-group">
				<label for="username">Username: </label>
				<input type="text" id="username" name="uname" placeholder="Enter your username" required />
			</div>

			<div class="input-group">
				<label for="password">Password: </label>
				<input type="password" id="password" name="pword" placeholder="Enter your password" required />
			</div>
			<br>
	<!--
	<label for="retype_pw">Retype Password:</label>
	<input type="password" id="retype_pw" name="retype_pword">
	-->
			<button type="button" onclick="getRegInfo()" class="btn">Register</button>
	
			<div class="login-link">
				Already have an account? <a href="login.php">Login</a>
			</div>
		</form>
	</div>
</div>
<div id="textResponse">
	<!--awaiting response-->
</div>
<script>
//SendLoginRequest("kehoed","12345");
</script>
</body>
</html>
